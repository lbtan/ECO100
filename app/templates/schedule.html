<h2><span style="color: black;">Schedule (</span><span style="color: #F4A460;">available</span><span style="color: black;">, </span><span style="color: #716e6b;">booked</span><span style="color: black;">)</span></h2>

{% if user[1] == "tutor" %}
<h3>Click on an existing appointment to view details/cancel. Click '+' to add new appointment time.</h3>
{% endif %}

{% for date, tutors in appointments_by_date.items() %}
<table class="col-md-8" border="1">
    <thead>
        <tr>
            <th colspan="3">{{ date.strftime('%A, %B %d, %Y') }}</th>
        </tr>
        <tr>
            <th class="tutor-column">Tutor</th>
            <th>Times Available</th>
        </tr>
    </thead>
    <tbody>
        {% for tutor, appointments in tutors.items() %}
            <tr>
                <td>{{ tutor }}</td>
                <td>
                    {% for appointment in appointments  %}
                        {% if user[1] == "tutor" and user[2] != tutor %}
                            <button class="btn time-slot {{ 'dark-btn' if appointment[1] else 'warm-btn' }}" data-tutor_netid="{{tutor}}" data-date="{{date}}" data-time="{{appointment[0]}}" disabled>{{ appointment[0] }}</button>
                        {% elif user[1] == "student" %}
                            <button class="btn time-slot warm-btn" data-tutor_netid="{{tutor}}" data-date="{{date}}" data-time="{{appointment}}">{{ appointment }}</button>
                        {% else %}
                            <button class="btn time-slot {{ 'dark-btn' if appointment[1] else 'warm-btn' }}" data-tutor_netid="{{tutor}}" data-date="{{date}}" data-time="{{appointment[0]}}">{{ appointment[0] }}</button>
                        {% endif %}
                    {% endfor %}
                    {% if user[1] == "tutor" and user[2] == tutor %}
                        <button class="btn warm-btn" onclick="window.location.href='{{ url_for( 'add_appointment', tutor_netid=tutor, date=date ) }}'">+</button>
                    {% endif %}    
                </td>
            </tr>
        {% endfor %}
    </tbody>
</table>
<br> 
{% endfor %}

<!-- Bootstrap JS and jQuery -->
<script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>

<!-- Include modal container -->
<div id="modal-container"></div>

<!-- Include external JavaScript file -->
<script src="{{ url_for('static', filename='js/script.js') }}"></script>