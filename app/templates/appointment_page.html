<!DOCTYPE html>

<!-- =========================================================== -->
<!-- appointment_page.html                                       -->
<!-- Author: Hita Gupta                                          -->
<!-- =========================================================== -->


<html>
 
<html>
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <!-- Bootstrap -->
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" 
            integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
        <!-- Custom CSS Module -->
        <link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='css/styles.css') }}">       
        <title>Appointment</title>
        <style>
            body {
            background-color: #F5F5DC; 
        }
        </style>
    </head>

    <body>
        {% include 'headerDynamic.html' with context %}
        
        <div class="container-fluid" >
        <h2>Appointment Details ({{"Booked" if appointment.get_booked() else "Available"}}):</h2>

        <form action="/appointment_confirm" method="post">

            <label for="date">Appointment Date:</label>
            <br>
            <input type="date" name="date" value="{{date}}" disabled>
            <br>
            
            <label for="time">Appointment Time:</label>
            <br>
            <input type="time" name="time" value="{{appointment.get_time().time()}}" disabled>
            <br>
            
            <label for="tutor_name">Tutor Name:</label>
            <br>
            <input type="text" value="{{tutor.get_name()}}" disabled>
            <br>
            
            <label for="student_name">Student Name:</label>
            <br>
            {% if user[1] != "student" or appointment.get_booked() %}
                <input type="text" name="student_name" value="{{student.get_name() if student else ''}}" disabled>
            {% else %}
                <input type="text" name="student_name" value="{{user[0]}}" disabled>
            {% endif %}
            <br>

            <label for="comments">Comments for Appointment:</label>
            <br>
            {% if user[1] != "student" or appointment.get_booked() %}
                <input type="textarea" name="comments" value="{{appointment.get_comments() if appointment.get_comments() else ''}}" disabled>
            {% else %}
                <input type="textarea" name="comments">  
            {% endif %}
            <br>

            {% if user[1] == "student" and not appointment.get_booked() %}
            <input type="hidden" name="tutor_netid" value="{{tutor.get_netid()}}">
            <input type="hidden" name="tutor_name" value="{{tutor.get_name()}}">
            <input type="hidden" name="student_netid" value="{{user[2]}}">
            <input type="submit" value="Submit">
            {% endif %}

            <br>

            {% if appointment.get_booked() and (user[2] == appointment.get_student_netid() or user[2] == appointment.get_tutor_netid()) %}
            <hr>
            <a href="{{url_for('cancel_appointment', time=appointment.get_time(), tutor_netid=tutor.get_netid())}}">Cancel appointment</a>
            {% endif %}

            <hr><a href="{{url_for(user[1]+'view')}}">Go back to dashboard</a>
        </form>

        <!DOCTYPE html>

</html>
